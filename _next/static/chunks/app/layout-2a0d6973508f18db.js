(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{95706:function(e,r,a){Promise.resolve().then(a.t.bind(a,47960,23)),Promise.resolve().then(a.bind(a,3577)),Promise.resolve().then(a.bind(a,23147)),Promise.resolve().then(a.bind(a,82798)),Promise.resolve().then(a.bind(a,33606)),Promise.resolve().then(a.t.bind(a,50911,23)),Promise.resolve().then(a.bind(a,19522))},3577:function(e,r,a){"use strict";a.d(r,{AuthProvider:function(){return o}});var n=a(57437),t=a(2265),s=a(99376),i=a(16023),c=a(51817);let l=["/login"];function o(e){let{children:r}=e,{user:a,loading:o,checkAuth:d,setLoading:u}=(0,i.a)(),g=(0,s.useRouter)(),m=(0,s.usePathname)();return((0,t.useEffect)(()=>{(async()=>{try{await Promise.race([d(),new Promise((e,r)=>setTimeout(()=>r(Error("Timeout")),1e4))])}catch(e){console.warn("Auth check timeout or error:",e.message),u(!1)}})();let e=setTimeout(()=>{console.warn("Force stopping loading after 15 seconds (safety timeout)"),u(!1)},15e3);return()=>{clearTimeout(e)}},[]),(0,t.useEffect)(()=>{if(!a)return;let e=setInterval(()=>{d()},3e5);return()=>clearInterval(e)},[a]),(0,t.useEffect)(()=>{if(o)return;let e=l.includes(m);a||e?a&&"/login"===m&&g.replace("/integrations"):g.replace("/login")},[a,o,m,g]),!o&&(a||l.includes(m)))?(0,n.jsx)(n.Fragment,{children:r}):(0,n.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,n.jsx)(c.Z,{className:"h-8 w-8 animate-spin"})})}},23147:function(e,r,a){"use strict";a.d(r,{ConditionalLayout:function(){return P}});var n=a(57437),t=a(99376),s=a(2265),i=a(94766),c=a(47692),l=a(85929),o=a(97226),d=a(25922),u=a(62869);function g(){let{theme:e,setTheme:r}=(0,d.F)();return(0,n.jsxs)(u.z,{variant:"ghost",size:"icon",onClick:()=>r("light"===e?"dark":"light"),className:"h-9 w-9",children:[(0,n.jsx)(l.Z,{className:"h-4 w-4 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,n.jsx)(o.Z,{className:"absolute h-4 w-4 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),(0,n.jsx)("span",{className:"sr-only",children:"Mavzuni o'zgartirish"})]})}var m=a(35974),f=a(70650),h=a(94508);function x(e){let{className:r,...a}=e;return(0,n.jsx)(f.fC,{"data-slot":"avatar",className:(0,h.cn)("relative flex size-8 shrink-0 overflow-hidden rounded-full",r),...a})}function v(e){let{className:r,...a}=e;return(0,n.jsx)(f.Ee,{"data-slot":"avatar-image",className:(0,h.cn)("aspect-square size-full",r),...a})}function b(e){let{className:r,...a}=e;return(0,n.jsx)(f.NY,{"data-slot":"avatar-fallback",className:(0,h.cn)("bg-muted flex size-full items-center justify-center rounded-full",r),...a})}var p=a(16023);function w(){let[e,r]=(0,s.useState)(!1),a=(0,s.useRef)(null),{user:l,logout:o}=(0,p.a)(),d=(0,t.useRouter)(),f=async()=>{r(!1),await o(),d.push("/login")};return(0,s.useEffect)(()=>{let e=e=>{a.current&&!a.current.contains(e.target)&&r(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,n.jsx)("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,n.jsxs)("div",{className:" flex h-16 items-center justify-between pe-6",children:[(0,n.jsx)("div",{className:"flex items-center gap-4",children:(0,n.jsxs)("div",{className:"flex flex-col ms-6",children:[(0,n.jsx)("h1",{className:"text-lg font-semibold leading-none",children:"Markaziy Bank"}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:"Integratsiyalar reestri"})]})}),(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsxs)(u.z,{variant:"ghost",size:"icon",className:"relative",children:[(0,n.jsx)(i.Z,{className:"h-4 w-4"}),(0,n.jsx)(m.C,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 rounded-full p-0 text-xs",children:"3"}),(0,n.jsx)("span",{className:"sr-only",children:"Bildirishnomalar"})]}),(0,n.jsx)(g,{}),(0,n.jsxs)("div",{className:"relative",ref:a,children:[(0,n.jsx)(u.z,{variant:"ghost",className:"relative h-8 w-8 rounded-full",onClick:()=>r(!e),children:(0,n.jsxs)(x,{className:"h-8 w-8",children:[(0,n.jsx)(v,{src:"/avatars/01.png",alt:"@username"}),(0,n.jsx)(b,{children:(null==l?void 0:l.email)?l.email.split("@")[0].substring(0,2).toUpperCase():"U"})]})}),e&&(0,n.jsxs)("div",{className:"absolute right-0 top-10 w-56 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg z-50",children:[(0,n.jsx)("div",{className:"p-3 border-b border-gray-200 dark:border-gray-700",children:(0,n.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,n.jsx)("p",{className:"text-sm font-medium leading-none",children:"Foydalanuvchi"}),(0,n.jsx)("p",{className:"text-xs leading-none text-gray-500 dark:text-gray-400",children:(null==l?void 0:l.email)||"email@example.com"}),(0,n.jsx)("p",{className:"text-xs leading-none text-gray-500 dark:text-gray-400",children:"Administrator"})]})}),(0,n.jsxs)("div",{className:"py-1",children:[(0,n.jsx)("button",{className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>r(!1),children:"Profil sozlamalari"}),(0,n.jsx)("button",{className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>r(!1),children:"Yordam"}),(0,n.jsx)("hr",{className:"my-1 border-gray-200 dark:border-gray-700"}),(0,n.jsxs)("button",{onClick:f,className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center",children:[(0,n.jsx)(c.Z,{className:"mr-2 h-4 w-4"}),"Chiqish"]})]})]})]})]})]})})}var j=a(27648),y=a(42558),N=a(50091),k=a(48736),V=a(95805),I=a(98728),C=a(10407),z=a(92451);let A=[{name:"Integratsiyalar",href:"/integrations",icon:N.Z,permission:"canViewIntegrations"},{name:"Audit jurnali",href:"/audit",icon:k.Z,permission:"canViewAudit"},{name:"Foydalanuvchilar",href:"/users",icon:V.Z,permission:"canViewUsers"},{name:"Sozlamalar",href:"/settings",icon:I.Z,permission:"canViewSettings"}];function E(){let[e,r]=(0,s.useState)(!1),a=(0,t.usePathname)(),{user:i}=(0,p.a)(),c=null==i?void 0:i.role,l=(0,y.ai)(c),o=A.filter(e=>l[e.permission]);return(0,n.jsxs)("div",{className:(0,h.cn)("relative flex flex-col border-r bg-sidebar transition-all duration-300",e?"w-16":"w-64"),children:[(0,n.jsxs)("div",{className:"flex h-16 items-center justify-between px-4 border-b",children:[!e&&(0,n.jsx)("h2",{className:"text-lg font-semibold text-sidebar-foreground",children:"Menyu"}),(0,n.jsx)(u.z,{variant:"ghost",size:"icon",onClick:()=>r(!e),className:"h-8 w-8",children:e?(0,n.jsx)(C.Z,{className:"h-4 w-4"}):(0,n.jsx)(z.Z,{className:"h-4 w-4"})})]}),(0,n.jsx)("nav",{className:"flex-1 space-y-1 p-2",children:o.map(r=>{let t=a===r.href;return(0,n.jsxs)(j.default,{href:r.href,className:(0,h.cn)("flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium transition-colors",t?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground"),children:[(0,n.jsx)(r.icon,{className:"h-4 w-4 flex-shrink-0"}),!e&&(0,n.jsx)("span",{children:r.name})]},r.name)})})]})}function P(e){let{children:r}=e;return"/login"===(0,t.usePathname)()?(0,n.jsx)(n.Fragment,{children:r}):(0,n.jsxs)("div",{className:"flex h-screen bg-background",children:[(0,n.jsx)(E,{}),(0,n.jsxs)("div",{className:"flex flex-1 flex-col overflow-hidden",children:[(0,n.jsx)(w,{}),(0,n.jsx)("main",{className:"flex-1 overflow-y-auto p-6",children:r})]})]})}},82798:function(e,r,a){"use strict";a.d(r,{ThemeProvider:function(){return s}});var n=a(57437);a(2265);var t=a(25922);function s(e){let{children:r,...a}=e;return(0,n.jsx)(t.f,{...a,children:r})}},35974:function(e,r,a){"use strict";a.d(r,{C:function(){return l}});var n=a(57437);a(2265);var t=a(37053),s=a(90535),i=a(94508);let c=(0,s.j)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:r,variant:a,asChild:s=!1,...l}=e,o=s?t.g7:"span";return(0,n.jsx)(o,{"data-slot":"badge",className:(0,i.cn)(c({variant:a}),r),...l})}},33606:function(e,r,a){"use strict";a.d(r,{Toaster:function(){return i}});var n=a(57437),t=a(25922),s=a(14438);let i=e=>{let{...r}=e,{theme:a="system"}=(0,t.F)();return(0,n.jsx)(s.x7,{theme:a,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...r})}},42558:function(e,r,a){"use strict";function n(e){if(!e)return{canViewIntegrations:!1,canCreateIntegrations:!1,canEditIntegrations:!1,canDeleteIntegrations:!1,canViewAudit:!1,canViewUsers:!1,canManageUsers:!1,canViewSettings:!1,canManageSettings:!1,canViewAnalytics:!1};switch(e){case"Administrator":return{canViewIntegrations:!0,canCreateIntegrations:!0,canEditIntegrations:!0,canDeleteIntegrations:!0,canViewAudit:!0,canViewUsers:!0,canManageUsers:!0,canViewSettings:!0,canManageSettings:!0,canViewAnalytics:!0};case"Operator":return{canViewIntegrations:!0,canCreateIntegrations:!0,canEditIntegrations:!0,canDeleteIntegrations:!1,canViewAudit:!0,canViewUsers:!1,canManageUsers:!1,canViewSettings:!1,canManageSettings:!1,canViewAnalytics:!0};case"Viewer":return{canViewIntegrations:!0,canCreateIntegrations:!1,canEditIntegrations:!1,canDeleteIntegrations:!1,canViewAudit:!0,canViewUsers:!1,canManageUsers:!1,canViewSettings:!1,canManageSettings:!1,canViewAnalytics:!0};default:return{canViewIntegrations:!1,canCreateIntegrations:!1,canEditIntegrations:!1,canDeleteIntegrations:!1,canViewAudit:!1,canViewUsers:!1,canManageUsers:!1,canViewSettings:!1,canManageSettings:!1,canViewAnalytics:!1}}}function t(e,r){return n(e)[r]}a.d(r,{Fs:function(){return t},ai:function(){return n}})},47960:function(){}},function(e){e.O(0,[587,566,886,604,168,126,453,971,117,744],function(){return e(e.s=95706)}),_N_E=e.O()}]);